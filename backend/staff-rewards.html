<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏Ñ‡∏≥ ‚Äî Staff & Rewards</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ====== ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ====== */
    :root{
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
    }
    html, body { height: 100%; }
    body{
      padding-top: var(--safe-top);
      padding-right: var(--safe-right);
      padding-bottom: var(--safe-bottom);
      padding-left: var(--safe-left);
      min-height: 100svh;
      -webkit-tap-highlight-color: transparent;
    }
    @supports (height: 100dvh){
      body{ min-height: 100dvh; }
    }

    /* ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏ï‡∏∞ & ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏Å‡∏±‡∏ô iOS auto-zoom */
    input, select, textarea, button{
      font-size: 16px;
      min-height: 44px;
    }

    /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏ö‡∏ô‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å */
    @media (max-width: 640px){
      body { padding-left: max(var(--safe-left), 10px); padding-right: max(var(--safe-right), 10px); }
    }

    /* ====== ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏ö‡∏ö mobile card (‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Äî ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ä‡πà‡∏ß‡∏á‡∏à‡∏≠) ====== */
    .hidden { display: none; }
    @media (max-width: 768px) {
      table.mobile-friendly { width: 100%; }
      table.mobile-friendly thead { display: none; }
      table.mobile-friendly tbody { display: grid; gap: .5rem; }
      table.mobile-friendly tr {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: .5rem;
        padding: .75rem;
        border-bottom: 1px solid #e5e7eb;
        background: #fff;
        border-radius: .75rem;
      }
      /* ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏≤‡∏Å ‡πÉ‡∏´‡πâ‡πÅ‡∏ñ‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ */
      @media (max-width: 420px){
        table.mobile-friendly tr { grid-template-columns: 1fr; }
      }
      table.mobile-friendly td {
        display: flex;
        gap: .5rem;
        align-items: baseline;
        min-width: 0; /* ‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏ô */
      }
      table.mobile-friendly td::before {
        content: attr(data-label);
        font-weight: 600;
        color: #6b7280;
        width: 7.5rem;
        min-width: 7.5rem;
        flex: 0 0 7.5rem;
      }
      /* ‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏ï‡∏±‡∏î‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÑ‡∏î‡πâ */
      table.mobile-friendly td > * {
        white-space: normal;
        word-break: break-word;
      }
    }

    /* ‡πÇ‡∏Ñ‡∏£‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏Å‡∏ï‡∏¥: ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏°‡∏≠ */
    .table-fixed { table-layout: fixed; }
    .overflow-x-auto { -webkit-overflow-scrolling: touch; }
    th, td { vertical-align: middle; }

    /* ====== ‡πÇ‡∏°‡∏î‡∏±‡∏•: ‡∏™‡∏π‡∏á‡∏û‡∏≠‡∏î‡∏µ‡∏à‡∏≠, ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô, ‡πÄ‡∏Ç‡πâ‡∏≤/‡∏≠‡∏≠‡∏Å‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏• ====== */
    .modal-enter { opacity: 0; transform: translateY(4px) scale(.98); }
    .modal-enter-active { opacity: 1; transform: translateY(0) scale(1); transition: all .15s ease; }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÇ‡∏°‡∏î‡∏±‡∏• (‡∏ï‡∏±‡∏ß .bg-white ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô) ‡πÉ‡∏´‡πâ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô */
    #staffModal > div,
    #rewardModal > div{
      max-height: 90svh;
      overflow: auto;
    }
    @supports (height: 100dvh){
      #staffModal > div,
      #rewardModal > div{ max-height: 90dvh; }
    }

    /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÇ‡∏ï‡πä‡∏∞: ‡πÉ‡∏´‡πâ wrap ‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏á‡πà‡∏≤‡∏¢‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    .toolbar { display: flex; flex-wrap: wrap; gap: .5rem; }
  </style>
</head>

<body class="bg-gray-50 min-h-screen p-4 sm:p-6 space-y-10">
  <!-- üìã ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô -->
  <section id="staff-section" class="max-w-6xl mx-auto bg-white rounded-2xl border border-gray-200 shadow-sm">
    <div class="p-4 sm:p-6">
      <h1 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6 flex items-center gap-2">üìã ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h1>
      <div class="mb-4 toolbar">
        <button onclick="openStaffModal()" id="openStaffModalBtn"
          class="inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 rounded-xl shadow-sm active:scale-[.98]">
          <span>‚ûï</span> <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</span>
        </button>
        <button id="loadStaffsBtn" onclick="loadStaffs()"
          class="inline-flex items-center gap-2 bg-gray-800 hover:bg-black text-white px-4 py-2.5 rounded-xl shadow-sm active:scale-[.98]">
          <span>üîÑ</span> <span data-text>‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
        </button>
      </div>
      <div class="overflow-x-auto rounded-xl border border-gray-200">
        <table class="min-w-full table-fixed text-sm mobile-friendly">
          <thead class="bg-gray-100">
            <tr class="text-left text-gray-700">
              <th class="px-4 py-2">StaffID</th>
              <th class="px-4 py-2">Username</th>
              <th class="px-4 py-2">Password</th>
              <th class="px-4 py-2">Name</th>
              <th class="px-4 py-2">BranchID</th>
              <th class="px-4 py-2">Role</th>
              <th class="px-4 py-2">Status</th>
              <th class="px-4 py-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
          </thead>
          <tbody id="staffTable"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- üéÅ ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• -->
  <section id="reward-section" class="max-w-6xl mx-auto bg-white rounded-2xl border border-gray-200 shadow-sm">
    <div class="p-4 sm:p-6">
      <h1 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6 flex items-center gap-2">üéÅ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h1>
      <div class="mb-4 toolbar">
        <button onclick="openRewardModal()" id="openRewardModalBtn"
          class="inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 rounded-xl shadow-sm active:scale-[.98]">
          <span>‚ûï</span> <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</span>
        </button>
        <button id="loadRewardsBtn" onclick="loadRewards()"
          class="inline-flex items-center gap-2 bg-gray-800 hover:bg-black text-white px-4 py-2.5 rounded-xl shadow-sm active:scale-[.98]">
          <span>üîÑ</span> <span data-text>‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
        </button>
      </div>
      <div class="overflow-x-auto rounded-xl border border-gray-200">
        <table class="min-w-full table-fixed text-sm mobile-friendly">
          <thead class="bg-gray-100">
            <tr class="text-left text-gray-700">
              <th class="px-4 py-2">rewardID</th>
              <th class="px-4 py-2">rewardName</th>
              <th class="px-4 py-2">points</th>
              <th class="px-4 py-2">active</th>
              <th class="px-4 py-2">startDate</th>
              <th class="px-4 py-2">endDate</th>
              <th class="px-4 py-2">stock</th>
              <th class="px-4 py-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
          </thead>
          <tbody id="rewardTable"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- üßë‚Äçüíº Modal ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô -->
  <div id="staffModal" class="fixed inset-0 bg-black/50 backdrop-blur-[1px] flex justify-center items-center hidden">
    <div class="bg-white p-6 rounded-2xl shadow-xl w-[92%] max-w-md modal-enter modal-enter-active">
      <h2 class="text-xl font-bold mb-4" id="staffModalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</h2>
      <div class="grid grid-cols-1 gap-3">
        <input id="modalUsername" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Username">
        <input id="modalPassword" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Password">
        <input id="modalName" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô">
        <input id="modalBranch" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Branch ID">
        <select id="modalRole" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="admin">admin</option>
          <option value="staff">staff</option>
        </select>
        <select id="modalStatus" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="active">active</option>
          <option value="inactive">inactive</option>
        </select>
      </div>
      <div class="flex justify-end gap-2 mt-5">
        <button onclick="closeStaffModal()" class="px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button id="saveStaffBtn" onclick="saveStaff()" class="px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-sm active:scale-[.98] disabled:opacity-70 disabled:cursor-not-allowed inline-flex items-center gap-2">
          <svg data-spin class="h-5 w-5 animate-spin hidden" viewBox="0 0 24 24" fill="none">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
          </svg>
          <span data-text>üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
        </button>
      </div>
    </div>
  </div>

  <!-- üéÅ Modal ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• -->
  <div id="rewardModal" class="fixed inset-0 bg-black/50 backdrop-blur-[1px] flex justify-center items-center hidden">
    <div class="bg-white p-6 rounded-2xl shadow-xl w-[92%] max-w-lg modal-enter modal-enter-active">
      <h2 class="text-xl font-bold mb-4" id="rewardModalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <input id="rewardName" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 sm:col-span-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•">
        <input id="points" type="number" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="‡πÅ‡∏ï‡πâ‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ">
        <select id="active" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="TRUE">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</option>
          <option value="FALSE">‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</option>
        </select>
        <input id="startDate" type="date" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400">
        <input id="endDate" type="date" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400">
        <input id="stock" type="number" class="border p-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠">
      </div>
      <div class="flex justify-end gap-2 mt-5">
        <button onclick="closeRewardModal()" class="px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button id="saveRewardBtn" onclick="saveReward()" class="px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-sm active:scale-[.98] disabled:opacity-70 disabled:cursor-not-allowed inline-flex items-center gap-2">
          <svg data-spin class="h-5 w-5 animate-spin hidden" viewBox="0 0 24 24" fill="none">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
          </svg>
          <span data-text>üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
        </button>
      </div>
    </div>
  </div>

  <script type="module" src="./api.admin.js"></script>
  <script type="module" src="./app.admin.js"></script>
</body>
</html>
